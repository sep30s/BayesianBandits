---
title: "Report Template - Updated: Methods"
subtitle: "This is a Report Template"
author: "Sara Parrish (Advisor: Dr. Seals)"
date: "`r format(Sys.time(), '%d %B, %Y')`"
date-format: "MMM D, YYYY"
format:
  html:
    code-fold: true
course: Capstone Projects in Data Science
bibliography: references.bib # file contains bibtex for references
#always_allow_html: true # this allows to get PDF with HTML features
self-contained: true
execute: 
  warning: false
  message: false
editor: 
  markdown: 
    wrap: 72
theme: solar
---

Slides: [slides.html](slides.html){target="_blank"} ( Go to `slides.qmd`
to edit)

## Introduction

The introduction should:

-   Develop a storyline that captures attention and maintains interest.

-   Your audience is your peers

-   Clearly state the problem or question you're addressing.

<!-- -->

-   Introduce why it is relevant needs.

-   Provide an overview of your approach.

Example of writing including citing references:

*This is an introduction to ..... regression, which is a non-parametric
estimator that estimates the conditional expectation of two variables
which is random. The goal of a kernel regression is to discover the
non-linear relationship between two random variables. To discover the
non-linear relationship, kernel estimator or kernel smoothing is the
main method to estimate the curve for non-parametric statistics. In
kernel estimator, weight function is known as kernel function
[@efr2008]. Cite this paper [@bro2014principal]. The GEE [@wang2014].
The PCA [@daffertshofer2004pca]*

*This is my work and I want to add more work...*

## Methods - Outline Only (Still working on how to tackle analysis)

### Linear regression con be achieved using different methods
  - frequentist vs. Bayesian methodology
    - frequentist
      - independent variables -> dependent variables 
      - regression coefficient is a point estimate, assumed to be fixed
      - does not include prior information in its estimate
    - Bayesian
      - independent variables -> dependent variables (this doesn't change)
      - regression coefficient is not a point estimate, but a distribution, not assumed to be a fixed value
      - incorporates prior information in its estimate

### The frequentist framework
    - linear model

$$
Y = \beta_0 + \beta_1X + \varepsilon \tag{1}
$$

  - $Y$ : Dependent variable, the outcome
  - $\beta_0$ : y intercept
  - $\beta_1$ : The regression coefficient 
  - $X$ : Independent variable
  - $\varepsilon$ : Random error [@xiaogang]
- $\hat\beta$ provides a point estimate

### The Bayesian framework
- relies on bayes rule
  - written simply as

$$
Posterior = \frac{Likelihood \times Prior}{Normalization}
$$

  - The $Prior$ is model of prior knowledge on the subject
  - The $Likelihood$ is the probability of the data given the prior
  - The $Normalization$ is a constant that ensures the posterior distribution is a valid density function whose integration is equal to 1
  - The $Posterior$ is the probability model that expresses an updated view of the model parameters
  - From the initial parameters of the prior

- In terms of calculating probability, bayed rule can be written as

$$
p(B|A) = \frac{p(A|B)\cdot p(B)}{p(A)} \tag{2}
$$

  - Bayes Rule allows for the calculation of inverse probability ($p(B|A) \text{ from } p(A|B)$)
    - $p(B|A) \text{ and } p(A|B)$ are conditional probabilities
    - $p(A) \text{ and } p(B)$ are marginal probabilities [@lesaffre]

- For continuous parameters, Bayes rule can be written as 

$$
\begin{align*}
p(\theta|y) =& \frac{ L(\theta|y)p(\theta) }{p(y)}\\
\\
p(\theta|y) \propto &   \text{ }L(\theta|y)p(\theta)
\end{align*}
$$

- The normalization constant ($p(y)$ above) ensures the posterior distribution is a valid distribution
  - The posterior density function can be written without this constant
- The resulting prediction is not a point estimate, but a distribution [@Bayes1991]

The Bayesian approach is derived with Bayesâ€™ theorem wherein the posterior distribution, the updated belief about the parameter given the data, is proportional to the conditional density of $D$ given $\theta$, $f(D|\theta)$, and the prior density of $\theta$, $f(\theta)$. The former is known as the likelihood function and would comprise the new data for analysis while the latter allows for the incorporation of prior knowledge regarding $\theta$[@xiaogang]. 

$$
f(\theta|D) \propto L(\theta|D)f(\theta) \tag{1}
$$



### Prior Selection

- Unsure, still trying to get any analysis to work
- Might compare a "prior" using data from prior years within same dataset to a flat prior

### Model

### Sampling

### Statistical programming

- [@R]
- [@brms]
- [@tidyverse]
- [@dplyr]
- [@bayesplot]
- [@tidyr]

****Do I only include packages used in analysis, outside of EDA here?
****Do I include packages like dplyr that aren't specific to Bayesian analysis here or just in the references?



















-   Detail the models or algorithms used.

-   Justify your choices based on the problem and data.


## Analysis and Results

### Data Exploration and Visualization

-   Describe your data sources and collection process.

-   Present initial findings and insights through visualizations.

-   Highlight unexpected patterns or anomalies.

A study was conducted to determine how...

```{r, warning=FALSE, echo=T, message=FALSE}
# loading packages 
library(tidyverse)
library(knitr)
library(ggthemes)
library(ggrepel)
library(dslabs)
```

```{r, warning=FALSE, echo=TRUE}
# Load Data
kable(head(murders))

ggplot1 = murders %>% ggplot(mapping = aes(x=population/10^6, y=total)) 

  ggplot1 + geom_point(aes(col=region), size = 4) +
  geom_text_repel(aes(label=abb)) +
  scale_x_log10() +
  scale_y_log10() +
  geom_smooth(formula = "y~x", method=lm,se = F)+
  xlab("Populations in millions (log10 scale)") + 
  ylab("Total number of murders (log10 scale)") +
  ggtitle("US Gun Murders in 2010") +
  scale_color_discrete(name = "Region")+
      theme_bw()
  

```

### Modeling and Results

-   Explain your data preprocessing and cleaning steps.

-   Present your key findings in a clear and concise manner.

-   Use visuals to support your claims.

-   **Tell a story about what the data reveals.**

```{r}

```

### Conclusion

-   Summarize your key findings.

-   Discuss the implications of your results.

## References
